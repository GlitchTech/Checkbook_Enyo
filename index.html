<!DOCTYPE html>
<html>
	<head>
		<title>Checkbook</title>
		<link rel="shortcut icon" href="assets/favicon.ico" />
		<!-- -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf8">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<!-- phonegap -->
		<script src="lib/cordova-2.5.0.js"></script>
		<!-- css -->
		<link href="build/enyo.css" rel="stylesheet" />
		<link href="build/app.css" rel="stylesheet" />
		<!-- js -->
		<script src="build/enyo.js"></script>
		<script src="build/app.js"></script>
	</head>
	<body class="enyo-unselectable">
		<div class="body-temp">
			<h1>Loading Checkbook</h1>
			<script>
				if( !enyo.platform.touch ) {
					//Not a mobile device

					enyo.log( "Checkbook :: Touchless environment, launching application" );
					onDeviceReady();
				} else {

					enyo.log( "Checkbook :: Applying start up listener" );
					document.addEventListener( "deviceready", onDeviceReady, false );
					document.addEventListener( "webworksready", onDeviceReady, false );
				}

				//PhoneGap is loaded and it is now safe to make calls PhoneGap methods
				function onDeviceReady() {

					if( !window.Checkbook.app ) {

						alert( "No application build found." );
						return;
					}

					//Logging level based on release status
					enyo.setLogLevel( enyo.fetchAppInfo()['id'].match( "beta" ) ? enyo.logging['levels']['log'] : enyo.logging['levels']['error'] );

					enyo.log( "Checkbook :: Activating touch scrolling mode" );
					enyo.Scroller.touchScrolling = true;

					enyo.log( "Checkbook :: Binding PhoneGap events" );
					enyo.dispatcher.listen( document, "backbutton" );
					enyo.dispatcher.listen( document, "menubutton" );
					enyo.dispatcher.listen( document, "searchbutton" );

					enyo.log( "Checkbook :: Rendering application" );
					new Checkbook.app().renderInto( document.body );
				}
			</script>
		</div>
	</body>
</html>
